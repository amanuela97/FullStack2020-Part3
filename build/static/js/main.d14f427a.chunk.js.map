{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","components/Notification.js","services/person.js","App.js","index.js"],"names":["Filter","search","handleSearch","value","onChange","PersonForm","formHandlers","newName","newNumber","handleSubmit","handleNameChange","handleNumberChange","onSubmit","required","type","Persons","List","handleDelete","map","person","name","number","onClick","id","Notification","message","className","state","baseURL","App","useState","persons","setPersons","setNewName","setNewNumber","setSearch","errorMessage","setErrorMessage","setDefaultError","setTimeout","e","preventDefault","filter","p","length","window","confirm","personToUpdate","find","newObject","axios","put","then","response","data","updatedPerson","catch","error","console","log","finally","personObject","post","createPerson","concat","target","toLowerCase","includes","useEffect","get","delete","deletePerson","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.d14f427a.chunk.js","sourcesContent":["import React from 'react';\n\nfunction Filter({search, handleSearch}) {\n    return (\n        <div>\n            filter by name: <input\n            value={search}\n            onChange={handleSearch}\n            /> \n        </div>\n    );\n}\n\nexport default Filter;","import React from 'react';\n\nfunction PersonForm({formHandlers}) {\n    const [\n        newName,\n        newNumber,\n        handleSubmit, \n        handleNameChange,\n        handleNumberChange\n    ] = formHandlers\n    \n    return (\n        <form onSubmit={handleSubmit}>\n        <div>\n          name: <input \n          value={newName}\n          required={true}\n          onChange={handleNameChange}\n          />\n        </div>\n        <div>\n          number: <input\n          value={newNumber}\n          required={true}\n          onChange={handleNumberChange} \n          />\n        </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n    );\n}\n\nexport default PersonForm;","import React from 'react';\n\nfunction Persons({List, handleDelete}) {\n    return (\n        <>\n         {List.map((person) => \n            <p key={person.id} >{person.name} {person.number} <button onClick={() => handleDelete(person.name,person.id)}>delete</button></p>\n        )}   \n        </>\n    );\n}\n\nexport default Persons;","import React from \"react\";\n\nconst Notification = ({ message}) => {\n\n    if (message.message === null) {\n        return null\n    }\n      \n    return (\n    <div className={message.state ? \"error\" : \"success\"}>\n        {message.message}\n    </div>\n    )\n}\n\nexport default Notification;","import axios from 'axios';\nconst baseURL = \"/api/persons\";\n\nconst getAll = () => {\n    const request =  axios.get(baseURL);\n    return request.then(response => response.data);\n}\n\nconst createPerson = (newObject) => {\n    const request = axios.post(baseURL, newObject);\n    return request.then(response => response.data);\n}\n\nconst update = (id, newObject) => {\n    const request = axios.put(`${baseURL}/${id}`, newObject);\n    return request.then(response => response.data);\n  };\n\nconst deletePerson = (id) => {\n    const request = axios.delete(`${baseURL}/${id}`);\n    return request.then(response => response.data);\n}\n\nexport {\n    getAll,\n    createPerson,\n    update,\n    deletePerson,\n  };\n","import React, { useState, useEffect } from 'react'\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonForm'\nimport Persons from './components/Persons'\nimport Notification from './components/Notification'\nimport { deletePerson, createPerson, getAll, update } from './services/person'\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([]) \n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [search, setSearch] = useState('')\n  const [errorMessage, setErrorMessage] = useState({\n    message: null,\n    state: false\n  });\n\n  const setDefaultError = () => {\n    setTimeout(() => {\n      setErrorMessage({...errorMessage, message: null});\n    }, 4000);\n  }\n\n  const handleSubmit = (e) =>{\n      e.preventDefault()\n\n      const exists = persons.filter( p => p.name === newName).length > 0\n      if(exists) {\n        if(window.confirm(`${newName} is already added to phonebook, replace the old number with the new one ?`)){\n          const personToUpdate = persons.find( p => p.name === newName)\n          update(personToUpdate.id, {...personToUpdate, number: newNumber})\n          .then(updatedPerson => {\n            setPersons(persons.map(p => (p.name === newName ? updatedPerson : p)))\n            setErrorMessage({\n              message: `${updatedPerson.name}Â´s number was successfully updated`,\n              state: false\n            })\n            setNewName('')\n            setNewNumber('')\n          }).catch(error => {\n            console.log(error.message)\n            setErrorMessage({\n              message: error.response.data.error,\n              state: true \n            })\n          }).finally(() => setDefaultError())\n        }\n        return\n      }\n\n      const personObject = {\n        name: newName,\n        number: newNumber,\n\n      }\n      createPerson(personObject)\n      .then(data => {\n        setPersons(persons.concat(data))\n        setErrorMessage({\n          message: `Successfully Added ${personObject.name}`,\n          state: false\n        })\n        setNewName('')\n        setNewNumber('')\n      }).catch(error => {\n        console.log(error.message);\n        setErrorMessage({\n          message: error.response.data.error,\n          state: true\n        })\n      }).finally(() => setDefaultError())\n  }\n\n  const handleDelete = (name,id) => {\n      if(window.confirm(`Delete ${name} ?`)){\n        deletePerson(id)\n        .then(() => {\n          setPersons(persons.filter(p => p.id !== id));\n          setErrorMessage({\n            message: `${name} was successfully deleted`,\n            state: false\n          })\n        }).catch(error => {\n          console.log(error);\n          setPersons(persons.filter(p => p.name !== name))\n          setErrorMessage({\n            message: `${name} has already been removed from the server :(`,\n            state: true\n          })\n        }).finally(() => setDefaultError())\n      }\n  }\n\n  const handleSearch = (e) => {\n    setSearch(e.target.value)\n  }\n\n  const handleNameChange = (e) => {\n    setNewName(e.target.value)\n  }\n\n  const handleNumberChange = (e) => {\n    setNewNumber(e.target.value)\n  }\n\n  const formHandlers = [\n    newName,\n    newNumber,\n    handleSubmit, \n    handleNameChange,\n    handleNumberChange\n  ]\n\n  const List = search.length > 0\n  ? persons.filter((p) => p.name.toLowerCase().includes(search.toLowerCase()))\n  : persons;\n\n  useEffect(() => {\n    getAll().then(data => {\n        setPersons(data)\n      }).catch(error => {\n        console.log(error);\n      })\n  }, [])\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={errorMessage}/>\n      <Filter search={search} handleSearch={handleSearch}/>\n      <h2>add new</h2>\n      <PersonForm formHandlers={formHandlers}/>\n      <h2>Numbers</h2>\n      <Persons List={List} handleDelete={handleDelete}/>\n    </div>\n  )\n}\n\nexport default App","import ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}