(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(15),a=t.n(c),r=t(5),s=t(3),u=t(2),o=t(0);var i=function(e){var n=e.search,t=e.handleSearch;return Object(o.jsxs)("div",{children:["filter by name: ",Object(o.jsx)("input",{value:n,onChange:t})]})};var l=function(e){var n=e.formHandlers,t=Object(s.a)(n,5),c=t[0],a=t[1],r=t[2],u=t[3],i=t[4];return Object(o.jsxs)("form",{onSubmit:r,children:[Object(o.jsxs)("div",{children:["name: ",Object(o.jsx)("input",{value:c,required:!0,onChange:u})]}),Object(o.jsxs)("div",{children:["number: ",Object(o.jsx)("input",{value:a,required:!0,onChange:i})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{type:"submit",children:"add"})})]})};var d=function(e){var n=e.List,t=e.handleDelete;return Object(o.jsx)(o.Fragment,{children:n.map((function(e){return Object(o.jsxs)("p",{children:[e.name," ",e.number," ",Object(o.jsx)("button",{onClick:function(){return t(e.name,e.id)},children:"delete"})]},e.id)}))})},f=function(e){var n=e.message;return null===n.message?null:Object(o.jsx)("div",{className:n.state?"error":"success",children:n.message})},j=t(4),b=t.n(j),h="/api/persons",m=function(){var e=Object(u.useState)([]),n=Object(s.a)(e,2),t=n[0],c=n[1],a=Object(u.useState)(""),j=Object(s.a)(a,2),m=j[0],O=j[1],g=Object(u.useState)(""),v=Object(s.a)(g,2),p=v[0],x=v[1],w=Object(u.useState)(""),y=Object(s.a)(w,2),S=y[0],k=y[1],C=Object(u.useState)({message:null,state:!1}),D=Object(s.a)(C,2),L=D[0],q=D[1],A=function(){setTimeout((function(){q(Object(r.a)(Object(r.a)({},L),{},{message:null}))}),4e3)},E=[m,p,function(e){if(e.preventDefault(),t.filter((function(e){return e.name===m})).length>0){if(window.confirm("".concat(m," is already added to phonebook, replace the old number with the new one ?"))){var n=t.find((function(e){return e.name=m}));(a=n.id,s=Object(r.a)(Object(r.a)({},n),{},{number:p}),b.a.put("".concat(h,"/").concat(a),s).then((function(e){return e.data}))).then((function(e){c(t.map((function(n){return n.name===m?e:n}))),q({message:"".concat(e.name,"\xb4s number was successfully updated"),state:!1}),O(""),x("")})).catch((function(e){console.log(e),q({message:"update failed",state:!0})})).finally((function(){return A()}))}}else{var a,s,u={name:m,number:p};(function(e){return b.a.post(h,e).then((function(e){return e.data}))})(u).then((function(e){c(t.concat(e)),q({message:"Successfully Added ".concat(u.name),state:!1}),O(""),x("")})).catch((function(e){console.log(e),q({message:"Adding person failed",state:!0})})).finally((function(){return A()}))}},function(e){O(e.target.value)},function(e){x(e.target.value)}],H=S.length>0?t.filter((function(e){return e.name.toLowerCase().includes(S.toLowerCase())})):t;return Object(u.useEffect)((function(){b.a.get(h).then((function(e){return e.data})).then((function(e){c(e)})).catch((function(e){console.log(e)}))}),[]),Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Phonebook"}),Object(o.jsx)(f,{message:L}),Object(o.jsx)(i,{search:S,handleSearch:function(e){k(e.target.value)}}),Object(o.jsx)("h2",{children:"add new"}),Object(o.jsx)(l,{formHandlers:E}),Object(o.jsx)("h2",{children:"Numbers"}),Object(o.jsx)(d,{List:H,handleDelete:function(e,n){window.confirm("Delete ".concat(e," ?"))&&function(e){return b.a.delete("".concat(h,"/").concat(e)).then((function(e){return e.data}))}(n).then((function(){c(t.filter((function(e){return e.id!==n}))),q({message:"".concat(e," was successfully deleted"),state:!1})})).catch((function(n){console.log(n),c(t.filter((function(n){return n.name!==e}))),q({message:"".concat(e," has already been removed from the server :("),state:!0})})).finally((function(){return A()}))}})]})};t(39);a.a.render(Object(o.jsx)(m,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.5eb14845.chunk.js.map